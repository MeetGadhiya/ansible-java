---

# The user to run nginx
nginx_user:                 "www-data"
nginx_group:                "{{nginx_user}}"
nginx_worker_processes:     "auto"
nginx_worker_rlimit_nofile: 1024
nginx_log_dir:              "/var/log/nginx"
nginx_error_log_level:      "warn"

# A list of directives for the events section.
nginx_events_params:
  - worker_connections 1024
  - use epoll
  - multi_accept on

nginx_http_params:
  - sendfile on
  - tcp_nopush on
  - tcp_nodelay on
  - log_format main '$remote_addr - $remote_user [$time_local]  $status ' '"$request" $body_bytes_sent "$http_referer" ' '"$http_user_agent" "$http_x_forwarded_for"'
  - access_log /var/log/nginx/access.log main buffer=8k
  - error_log /var/log/nginx/error.log
  - server_names_hash_bucket_size 128
  - open_file_cache max=200000 inactive=20s
  - open_file_cache_valid 30s
  - open_file_cache_min_uses 2
  - open_file_cache_errors on
  - reset_timedout_connection on
  - client_body_timeout 120s
  - send_timeout 120s
  - keepalive_timeout 120s
  - keepalive_requests 100000
  - underscores_in_headers on

nginx_configs:
  ssl:
    - ssl_protocols TLSv1 TLSv1.1 TLSv1.2
    - ssl_prefer_server_ciphers on
    - ssl_ciphers "EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH"
    - ssl_ecdh_curve secp384r1
    - ssl_session_cache shared:SSL:10m
    - ssl_session_tickets off
    - ssl_stapling on
    - ssl_stapling_verify on
    - resolver 8.8.8.8 8.8.4.4 valid=300s
    - resolver_timeout 60s
    - |
      add_header Strict-Transport-Security "max-age=63072000; includeSubDomains; preload";
    - add_header X-Frame-Options DENY
    - add_header X-Content-Type-Options nosniff
    - ssl_dhparam /etc/ssl/certs/dhparam.pem
  proxy:
    - proxy_redirect          off
    - proxy_set_header        Host $host
    - proxy_set_header        X-Real-IP  $remote_addr
    - proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for
    - client_max_body_size    100m
    - client_body_buffer_size 128k
    - proxy_connect_timeout   90
    - proxy_send_timeout      90
    - proxy_read_timeout      90
    - proxy_buffers           32 4k
  gzip:
    - gzip                    on
    - gzip_min_length         1000
    - gunzip                  on
    - gzip_vary               on
    - gzip_proxied            expired no-cache no-store private auth
    - gzip_types              text/plain text/css text/xml text/javascript application/javascript application/x-javascript application/json application/xml
    - gzip_disable            msie6
  geoip:
    - |
      map $geoip_city_continent_code $ip_region {
          EU eu;
          NA na;
          AS as;
          AF af;
      }
    - geoip_city /usr/share/GeoIP/GeoLiteCity.dat
  upstream:
    - upstream auth-service { server 10.0.4.4:8081; server 10.0.4.5:8081; }
    - upstream survey-service { server 10.0.4.4:8082; server 10.0.4.5:8082; }
    - upstream futurx-report { server 10.0.4.4:8083; server 10.0.4.5:8083; }
    - upstream dashboard-analytics { server 10.0.4.4:8084; server 10.0.4.5:8084; }
    - upstream business-rule { server 10.0.4.4:8085; server 10.0.4.5:8085; }
    - upstream customers-details { server 10.0.4.4:8086; server 10.0.4.5:8086; }
    - upstream score-service { server 10.0.4.4:8087; server 10.0.4.5:8087; }
    - upstream report-service { server 10.0.4.4:8088; server 10.0.4.5:8088; }
    - upstream steerhigh-service { server 10.0.4.4:8089; server 10.0.4.5:8089; }
    - upstream token-management-service { server 10.0.4.4:8090; server 10.0.4.5:8090; }
    - upstream role-management-service { server 10.0.4.4:8091; server 10.0.4.5:8091; }
    - upstream config-ms { server 10.0.4.4:8092; server 10.0.4.5:8092; }
    - upstream master-data-mgmt-service { server 10.0.4.4:8093; server 10.0.4.5:8093; }
    - upstream hirest-service { server 10.0.4.4:8094; server 10.0.4.5:8094; }
    - upstream talent-success-analytics-service { server 10.0.4.4:8095; server 10.0.4.5:8095; }
    - upstream notifications-service { server 10.0.4.4:8096; server 10.0.4.5:8096; }
    - upstream job-fitment-service { server 10.0.4.4:8097; server 10.0.4.5:8097; }
    - upstream scikey-assessment-service { server 10.0.4.4:8098; server 10.0.4.5:8098; }
    - upstream feature-mgmt-config-service { server 10.0.4.4:8099; server 10.0.4.5:8099; }
    - upstream excel-mapping-service { server 10.0.4.4:8100; server 10.0.4.5:8100; }
    - upstream hotel-dashboard-anayltics { server 10.0.4.4:8101; server 10.0.4.5:8101; }
    - upstream resume-service { server 10.0.4.4:8102; server 10.0.4.5:8102; }
    - upstream text-extraction-service { server 10.0.4.4:8103; server 10.0.4.5:8103; }
    - upstream pii-mgmt-service { server 10.0.4.4:8104; server 10.0.4.5:8104; }
    - upstream analytics-service { server 10.0.4.4:8105; server 10.0.4.5:8105; }
    - upstream jobs-mgmt-service { server 10.0.4.4:8106; server 10.0.4.5:8106; }
    - upstream hire-right-chat-bot-service { server 10.0.4.4:8107; server 10.0.4.5:8107; }
    - upstream crypto-service { server 10.0.4.4:8108; server 10.0.4.5:8108; }
    - upstream consultancy-mgmt-service { server 10.0.4.4:8109; server 10.0.4.5:8109; }
    - upstream career-mgmt-service { server 10.0.4.4:8110; server 10.0.4.5:8110; }
    - upstream job-master-management-service { server 10.0.4.4:8111; server 10.0.4.5:8111; }
    - upstream hiring-process-management-service { server 10.0.4.4:8112; server 10.0.4.5:8112; }
    - upstream candidate-mgmt-service { server 10.0.4.4:8113; server 10.0.4.5:8113; }
    - upstream email-service { server 10.0.4.4:8114; server 10.0.4.5:8114; }
    - upstream location-manager { server 10.0.4.4:8115; server 10.0.4.5:8115; }
    - upstream scikey-scores-master-service { server 10.0.4.4:8116; server 10.0.4.5:8116; }
    - upstream mssql-service { server 10.0.4.4:8117; server 10.0.4.5:8117; }
    - upstream sms-transport-service { server 10.0.4.4:8118; server 10.0.4.5:8118; }
    - upstream fresume-service { server 10.0.4.4:8119; server 10.0.4.5:8119; }
    - upstream fresume-template-mgmt-service { server 10.0.4.4:8120; server 10.0.4.5:8120; }
    - upstream location-zip-service { server 10.0.4.4:8121; server 10.0.4.5:8121; }
    - upstream resume-upload-service { server 10.0.4.4:8122; server 10.0.4.5:8122; }
    - upstream hirer-analytics-service { server 10.0.4.4:8123; server 10.0.4.5:8123; }
    - upstream hire-admin-mgmt-service { server 10.0.4.4:8124; server 10.0.4.5:8124; }
    - upstream candidate-dashboard-service { server 10.0.4.4:8125; server 10.0.4.5:8125; }
    - upstream job-interests-service { server 10.0.4.4:8126; server 10.0.4.5:8126; }
    - upstream org-hierarchy-service { server 10.0.4.4:8127; server 10.0.4.5:8127; }
    - upstream scikey-gdpr-service { server 10.0.4.4:8128; server 10.0.4.5:8128; }
    - upstream data-extraction-service { server 10.0.4.4:8129; server 10.0.4.5:8129; }
    - upstream contributor-mgmt-service { server 10.0.4.4:8130; server 10.0.4.5:8130; }
    - upstream consents-mgmt-service { server 10.0.4.4:8131; server 10.0.4.5:8131; }
    - upstream data-mask-service { server 10.0.4.4:8132; server 10.0.4.5:8132; }
    - upstream skill-price-weightage-service { server 10.0.4.4:8133; server 10.0.4.5:8133; }
    - upstream base-price-weightage-service { server 10.0.4.4:8134; server 10.0.4.5:8134; }
    - upstream candidate-match-service { server 10.0.4.4:8135; server 10.0.4.5:8135; }
    - upstream location-price-weightage-service { server 10.0.4.4:8136; server 10.0.4.5:8136; }
    - upstream experience-price-weightage-service { server 10.0.4.4:8137; server 10.0.4.5:8137; }
    - upstream data-reveal-service { server 10.0.4.4:8138; server 10.0.4.5:8138; }
    - upstream pricing-resolver-mgmt-service { server 10.0.4.4:8139; server 10.0.4.5:8139; }
    - upstream cache-ms { server 10.0.4.4:3008; server 10.0.4.5:3008; }
    - upstream price-management-service { server 10.0.4.4:8140; server 10.0.4.5:8140; }
    - upstream payment-gateway-service { server 10.0.4.4:8141; server 10.0.4.5:8141; }
    - upstream job-queue-service { server 10.0.4.4:8142; server 10.0.4.5:8142; }
    - upstream hirest-auth-service { server 10.0.4.4:8145; server 10.0.4.5:8145; }
    - upstream candidate-data-quality-mgmt-service { server 10.0.4.4:8144; server 10.0.4.5:8144; }
    - upstream candidate-power-search { server 10.0.4.4:8146; server 10.0.4.5:8146; }
    - upstream user-management-service { server 10.0.4.4:8147; server 10.0.4.5:8147; }
    - upstream candidate-details-service { server 10.0.4.4:8148; server 10.0.4.5:8148; }
    - upstream candidate-conversation-service { server 10.0.4.4:8151; server 10.0.4.5:8151; }
    - upstream ivr-service { server 10.0.4.4:8152; server 10.0.4.5:8152; }
    - upstream secrets-management-service { server 10.0.4.4:8150; server 10.0.4.5:8150; }
    - upstream jobs-power-search { server 10.0.4.4:8149; server 10.0.4.5:8149; }
    - upstream unleash-client-service { server 10.0.4.4:8154; server 10.0.4.5:8154; }
    - upstream document-to-pdf-converter-service { server 10.0.4.4:8156; server 10.0.4.5:8156; }
    - upstream referral-management-service { server 10.0.4.4:8159; server 10.0.4.5:8159; }
    - upstream vendor-management-service { server 10.0.4.4:8158; server 10.0.4.5:8158; }
    - upstream metabase-service { server 10.0.4.4:8157; server 10.0.4.5:8157; }
    - upstream digital-signature-service { server 10.0.4.4:8160; server 10.0.4.5:8160; }
    - upstream hireability-integration-service { server 10.0.4.4:8161; server 10.0.4.5:8161; }
    - upstream resume-viewer-service { server 10.0.4.4:8163; server 10.0.4.5:8163; }
    - upstream watermark-mgmt-service { server 10.0.4.4:8162; server 10.0.4.5:8162; }
    - upstream client-db-service { server 10.0.4.4:8164; server 10.0.4.5:8164; }
    - upstream blacklisting-entity-service { server 10.0.4.4:8166; server 10.0.4.5:8166; }

nginx_sites:
  default:
    - listen 80 default_server
    - listen [::]:80 default_server
    - server_name _
    - |
      location /test/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /excelMapping/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://excel-mapping-service;
      }
    - |
      location ^~ /hotelDashboardAnalytics/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://hotel-dashboard-anayltics;
      }
    - |
      location ^~ /hotelDashboardAnalytics/v2/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://hotel-dashboard-anayltics;
      }
    - |
      location ^~ /api/v1/mail {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://email-service;
      }
    - |
      location ^~ /hirest/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://hirest-service;
      }
    - |
      location ^~ /hirest/auth/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://hirest-auth-service;
      }
    - |
      location ^~ /consultancy/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://consultancy-mgmt-service;
      }
    - |
      location ^~ /consultancy/v2/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://consultancy-mgmt-service;
      }
    - |
      location ^~ /career/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://career-mgmt-service;
      }
    - |
      location ^~ /execute/sp/v1 {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://mssql-service;
      }
    - |
      location ^~ /api/v1/zipcode {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://location-zip-service;
      }
    - |
      location ^~ /business/rules/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://business-rule;
      }
    - |
      location ^~ /serenaway/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://customers-details;
      }
    - |
      location ^~ /serenaway/score/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://score-service;
      }
    - |
      location ^~ /serenaway/report/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://report-service;
      }
    - |
      location ^~ /auth/v3/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /report/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /score/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /sthi/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://steerhigh-service;
      }
    - |
      location ^~ /sthi/v2/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://steerhigh-service;
      }
    - |
      location ^~ /sthi/score/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://score-service;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://dashboard-analytics;
      }
    - |
      location ^~ /scikey/v2/jobfitment {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://job-fitment-service;
      }
    - |
      location ^~ /scikey/v2/assessments {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://scikey-assessment-service;
      }
    - |
      location ^~ /scikey/v1/master {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://job-fitment-service;
      }
    - |
      location ^~ /resume/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /resume/v2/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /resume/v3/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /resume/v4/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /resume/v5/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /resume/v6/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /extraction/text {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://text-extraction-service;
      }
    - |
      location ^~ /api/v1/analytics/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://analytics-service;
      }
    - |
      location ^~ /api/v2/analytics/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://analytics-service;
      }
    - |
      location ^~ /v1/skills {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /v2/jobs {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /v1/jobs {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /v3/jobs {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /virtualAssistant/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://hire-right-chat-bot-service;
      }
    - |
      location ^~ /job-master/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://job-master-management-service;
      }
    - |
      location ^~ /job-master/v2/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://job-master-management-service;
      }
    - |
      location ^~ /scikey/workflow/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://hiring-process-management-service;
      }
    - |
      location ^~ /api/v1/candidate {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v2/candidate {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v3/candidate {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v4/candidate {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://127.0.0.1:8113;
      }
    - |
      location ^~ /api/v1/candidates {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v2/candidates {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v3/candidates {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v4/candidates {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /smsTransportService/v1  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://sms-transport-service;
      }
    - |
      location ^~  /api/v1/sms  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://sms-transport-service;
      }
    - |
      location ^~ /api/v1/fresume  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://fresume-service;
      }
    - |
      location ^~ /api/v2/fresume  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://fresume-service;
      }
    - |
      location ^~ /api/v1/fresume/templates  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://fresume-template-mgmt-service;
      }
    - |
      location ^~ /api/v1/resume  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://resume-upload-service;
      }
    - |
      location ^~ /api/v2/resume  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://resume-upload-service;
      }
    - |
      location ^~ /api/v3/resume  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://resume-upload-service;
      }
    - |
      location ^~ /api/v3/resumes  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://resume-upload-service;
      }
    - |
      location ^~ /api/v4/resumes  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://resume-upload-service;
      }
    - |
      location ^~ /api/v1/hire/analytics  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://hirer-analytics-service;
      }
    - |
      location ^~ /api/v2/hire/analytics  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://hirer-analytics-service;
      }
    - |
      location ^~ /api/v3/hire/analytics  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://hirer-analytics-service;
      }
    - |
      location ^~ /api/v1/metabase  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://hirer-analytics-service;
      }
    - |
      location ^~ /api/v1/job/interests  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://job-interests-service;
      }
    - |
      location ^~ /api/v1/org/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://org-hierarchy-service;
      }
    - |
      location ^~ /api/v1/contributor/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://contributor-mgmt-service;
      }
    - |
      location ^~ /api/v2/contributor/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://contributor-mgmt-service;
      }
    - |
      location ^~ /api/v1/gdpr/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://scikey-gdpr-service;
      }
    - |
      location ^~ /api/v1/extraction/data {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://data-extraction-service;
      }
    - |
      location ^~ /api/v1/hire/admin/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://hire-admin-mgmt-service;
      }
    - |
      location ^~ /scikey/v1/report/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://report-service;
      }
    - |
      location ^~ /api/v1/maskData  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://data-mask-service;
      }
    - |
      location ^~ /api/v2/maskData  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://data-mask-service;
      }
    - |
      location ^~ /api/v1/consents/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://consents-mgmt-service;
      }
    - |
      location ^~ /api/v1/candidates/match {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://candidate-match-service;
      }
    - |
      location ^~ /api/v1/skill/weightage/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://skill-price-weightage-service;
      }
    - |
      location ^~ /api/v1/base/price/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://base-price-weightage-service;
      }
    - |
      location ^~ /api/v1/location/weightage/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://location-price-weightage-service;
      }
    - |
      location ^~ /api/v1/experience/weightage/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://experience-price-weightage-service;
      }
    - |
      location ^~ /api/v1/reveal/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://data-reveal-service;
      }
    - |
      location ^~ /api/v1/price/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://price-management-service;
      }
    - |
      location ^~ /api/v1/payment/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://payment-gateway-service;
      }
    - |
      location ^~ /api/v1/queue/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://job-queue-service;
      }
    - |
      location ^~ /api/v1/data/quality/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://candidate-data-quality-mgmt-service;
      }
    - |
      location ^~ /api/v1/candidate/search {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://candidate-power-search;
      }
    - |
      location ^~ /api/v2/candidate/search {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://candidate-power-search;
      }
    - |
      location ^~ /api/v3/candidate/search {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://candidate-power-search;
      }
    - |
      location ^~ /api/v1/candidate/conversation {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://candidate-conversation-service;
      }
    - |
      location ^~ /api/v1/exotel {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://ivr-service;
      }
    - |
      location ^~ /api/v1/role/  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://role-management-service;
      }
    - |
      location ^~ /api/v1/token/  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://token-management-service;
      }
    - |
      location ^~ /socket.io/ {
          proxy_pass http://10.0.4.4:8107;
          proxy_http_version 1.1;
          proxy_set_header Upgrade $http_upgrade;
          proxy_set_header Connection "Upgrade";
          proxy_set_header Host $host;
      }
    - |
      location ^~ /auth/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /s/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /auth/v2/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /steerhigh/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /steerhigh/v2/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /steerhigh/v3/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /assessment/score/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://score-service;
      }
    - |
      location ^~ /sthi/v2/report/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://report-service;
      }
    - |
      location ^~ /sthi/v3/report/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://report-service;
      }
    - |
      location ^~ /sthi/v5/report/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://127.0.0.1:8088;
      }
    - |
      location = /configms/v1/saveConfig {
        #   allow 13.71.30.188;
        #   deny all;
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /configms/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /configms/v2/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /analytics/v1/assessments/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://talent-success-analytics-service;
      }
    - |
      location ^~ /profile/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://notifications-service;
      }
    - |
      location ^~ /user/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://notifications-service;
      }
    - |
      location ^~ /scikey/v1/dictionaries {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://job-fitment-service;
      }
    - |
      location ^~ /scikey/v1/jobfitment {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://job-fitment-service;
      }
    - |
      location ^~ /scikey/v1/assessments {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://scikey-assessment-service;
      }
    - |
      location ^~ /featureMgmtConfigService/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://feature-mgmt-config-service;
      }
    - |
      location ^~ /pii/mgmt/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://pii-mgmt-service;
      }
    - |
      location ^~ /api/v1/location {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://location-manager;
      }
    - |
      location ^~ /api/v1/scikey/score {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://scikey-scores-master-service;
      }
    - |
      location ^~ /v1/lookup {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /api/v1/hire/admin {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://hire-admin-mgmt-service;
      }
    - |
      location ^~ /api/v1/candidates/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v1/dashboard/candidate  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://candidate-dashboard-service;
      }
    - |
      location ^~ /cache/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://cache-ms;
      }
    - |
      location ^~ /crypto/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://crypto-service;
      }
    - |
      location ^~ /scikey/pricing/resolver/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://pricing-resolver-mgmt-service;
      }
    - |
      location ^~ /scikey/v1/calculate {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://job-fitment-service;
      }
    - |
      location ^~ /scikey/v3/jobfitment/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://job-fitment-service;
      }
    - |
      location ^~ /scikey/score/v1/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://score-service;
      }
    - |
      location ^~ /sthi/v4/report/thinkSuccess {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://report-service;
      }
    - |
      location ^~ /smsTransportService/v2  {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://sms-transport-service;
      }
    - |
      location ^~ /job-master/v3/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://job-master-management-service;
      }
    - |
      location ^~ /api/v1/company/legal_entity {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /api/v1/check/registered/company {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://jobs-mgmt-service;
      }
      location ^~ /api/v1/jobs/legalEntity {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /api/v1/save/assign/job/details {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /api/v1/get/assignee/details/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /api/v1/revoke/assign/job/permission {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /api/v1/update/assign/job/permission {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /v5/jobs {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /api/v1/secret {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://secrets-management-service;
      }
    - |
      location ^~ /convert/format/pdf {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://document-to-pdf-converter-service;
      }
    - |
      location ^~ /api/v1/referral {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://referral-management-service;
      }
    - |
      location ^~ /api/v1/vendor/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://vendor-management-service;
      }
    - |
      location ^~ /api/v1/resumeViewer/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://resume-viewer-service;
      }
    - |
      location ^~ /api/v1/watermark {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://watermark-mgmt-service;
      }
    - |
      location ^~ /api/v1/signature/ {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://digital-signature-service;
      }
    - |
      location ^~ /api/v1/feature {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://unleash-client-service;
      }
    - |
      location ^~ /mtbase/dashboards {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://metabase-service;
      }
    - |
      location ^~ /api/v1/parse {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://hireability-integration-service;
      }
    - |
      location ^~ /api/v1/client {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://client-db-service;
      }
    - |
      location ^~ /api/v1/entity {
          allow 10.0.4.0/24;
          allow 127.0.0.1;
          deny all;
          proxy_pass http://blacklisting-entity-service;
      }
    - |
      location / {
          deny all;
      }
  serenaway-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^qa-(?<client>.+)\.serenaway\.com$
    - ssl_certificate /etc/letsencrypt/live/qa-app.serenaway.com/fullchain.pem
    - ssl_certificate_key /etc/letsencrypt/live/qa-app.serenaway.com/privkey.pem
    - root /opt/futurx/services/SerenaWay-Desktop-Web
    - index index.html index.htm
    - add_header Content-Security-Policy "frame-ancestors 'self' https://*.hirest.net"
    - set $doBlock false
    - |
      if ($ip_region = eu) {
          set $doBlock true;
      }
    - if ($client = enrich) {
          set $doBlock false;
      }
    - if ($client = app) {
          set $doBlock false;
      }
    - if ($doBlock = true) {
          rewrite ^ /notice/serenaway/GDPR_notice.html last;
      }
    - location /notice {
          root /opt/futurx/services/Annoucements;
      }
    - |
      location ^~ /auth/v1/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /s/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /report/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /score/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /business/rules/v1/ {
          proxy_pass http://business-rule;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          proxy_pass http://dashboard-analytics;
      }
    - |
      location ^~ /serenaway/v1/ {
          proxy_pass http://customers-details;
      }
    - |
      location ^~ /serenaway/score/v1/ {
           proxy_pass http://score-service;
      }
    - |
      location ^~ /assessment/score/v1/ {
          proxy_pass http://score-service;
      }
    - |
      location ^~ /serenaway/report/v1/ {
          proxy_pass http://report-service;
      }
    - |
      location ^~ /excelMapping/v1/ {
          proxy_pass http://excel-mapping-service;
      }
    - |
      location ^~ /hotelDashboardAnalytics/v1/ {
          proxy_pass http://hotel-dashboard-anayltics;
      }
    - |
      location ^~ /featureMgmtConfigService/v1/ {
          proxy_pass http://feature-mgmt-config-service;
      }
    - |
      location ^~ /hotelDashboardAnalytics/v2/ {
          proxy_pass http://hotel-dashboard-anayltics;
      }
    - |
      location ^~ /configms/v1/ {
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /api/v1/location {
          proxy_pass http://location-manager;
      }
    - |
      location ^~ /api/v1/mail {
          proxy_pass http://email-service;
      }
    - |
      location ^~ /smsTransportService/v1  {
          proxy_pass http://sms-transport-service;
      }
    - |
      location /img/ {
          expires max;
          access_log off;
          root /mnt/appdata;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires max;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location ^~ /assets/clients {
          root /opt/futurx/services/SerenaWay-Clients-Assets;
      }
    - |
      location /index.html {
          root /opt/futurx/services/SerenaWay-Clients-Assets;
          try_files /assets/clients/$client/index.html /index.html;
      }
    - |
      location / {
          try_files $uri $uri/ /index.html;
      }
  serenaway-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^qa-(.*)\.serenaway\.com$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  hirest-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^qa-(?<client>.+)\.hirest\.net$
    - ssl_certificate /etc/letsencrypt/live/qa-app.hirest.net/fullchain.pem
    - ssl_certificate_key /etc/letsencrypt/live/qa-app.hirest.net/privkey.pem
    - root /opt/futurx/services/hirest-webapp
    - index index.html index.htm
    - client_body_timeout 400s
    - send_timeout 400s
    - keepalive_timeout 400s
    - proxy_connect_timeout   400
    - proxy_send_timeout      400
    - proxy_read_timeout      400
    - add_header Content-Security-Policy "child-src 'self' https://*.serenaway.com https://docs.google.com https://www.youtube.com https://youtu.be https://res.cloudinary.com blob:"
    - |
      location ^~ /hirest/auth/v1/ {
          proxy_pass http://hirest-auth-service;
      }
    - |
      location ^~ /s/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /report/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /score/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /business/rules/v1/ {
          proxy_pass http://business-rule;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          proxy_pass http://dashboard-analytics;
      }
    - |
      location ^~ /serenaway/v1/ {
          proxy_pass http://customers-details;
      }
    - |
      location ^~ /serenaway/score/v1/ {
          proxy_pass http://score-service;
      }
    - |
      location ^~ /serenaway/report/v1/ {
          proxy_pass http://report-service;
      }
    - |
      location = /configms/v1/saveConfig {
        #   allow 13.71.30.188;
        #   deny all;
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /configms/v1/ {
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /hirest/v1/ {
          proxy_pass http://hirest-service;
      }
    - |
      location ^~ /consultancy/v1/ {
          proxy_pass http://consultancy-mgmt-service;
      }
    - |
      location ^~ /consultancy/v2/ {
          proxy_pass http://consultancy-mgmt-service;
      }
    - |
      location ^~ /career/v1/ {
          proxy_pass http://career-mgmt-service;
      }
    - |
      location ^~ /api/v1/location {
          proxy_pass http://location-manager;
      }
    - |
      location ^~ /execute/sp/v1 {
          proxy_pass http://mssql-service;
      }
    - |
      location ^~ /api/v1/zipcode {
          proxy_pass http://location-zip-service;
      }
    - |
      location ^~ /api/v1/candidatedetails {
          proxy_pass http://candidate-details-service;
      }
    - |
      location /img/ {
          expires max;
          access_log off;
          root /mnt/appdata;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires max;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location / {
          index index.html index.htm;
          try_files $uri $uri/ /index.html;
      }
  hirest-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^qa-(.*)\.hirest\.net$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }

  hirest-v2-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^qa-(?<client>.+)\.hirest\.net$
    - ssl_certificate /etc/letsencrypt/live/qa-app.hirest.net/fullchain.pem
    - ssl_certificate_key /etc/letsencrypt/live/qa-app.hirest.net/privkey.pem
    - root /opt/futurx/services/hirest-webapp
    - index index.html index.htm
    - client_body_timeout 400s
    - send_timeout 400s
    - keepalive_timeout 400s
    - proxy_connect_timeout   400
    - proxy_send_timeout      400
    - proxy_read_timeout      400
    - add_header Content-Security-Policy "child-src 'self' https://*.serenaway.com https://docs.google.com https://www.youtube.com https://youtu.be https://res.cloudinary.com blob:"
    - |
      location ^~ /hirest/auth/v1/ {
          proxy_pass http://hirest-auth-service;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /report/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /score/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /business/rules/v1/ {
          proxy_pass http://business-rule;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          proxy_pass http://dashboard-analytics;
      }
    - |
      location ^~ /serenaway/v1/ {
          proxy_pass http://customers-details;
      }
    - |
      location ^~ /serenaway/score/v1/ {
          proxy_pass http://score-service;
      }
    - |
      location ^~ /serenaway/report/v1/ {
          proxy_pass http://report-service;
      }
    - |
      location = /configms/v1/saveConfig {
        #   allow 13.71.30.188;
        #   deny all;
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /configms/v1/ {
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /hirest/v1/ {
          proxy_pass http://hirest-service;
      }
    - |
      location ^~ /consultancy/v1/ {
          proxy_pass http://consultancy-mgmt-service;
      }
    - |
      location ^~ /consultancy/v2/ {
          proxy_pass http://consultancy-mgmt-service;
      }
    - |
      location ^~ /career/v1/ {
          proxy_pass http://career-mgmt-service;
      }
    - |
      location ^~ /api/v1/location {
          proxy_pass http://location-manager;
      }
    - |
      location ^~ /execute/sp/v1 {
          proxy_pass http://mssql-service;
      }
    - |
      location ^~ /api/v1/zipcode {
          proxy_pass http://location-zip-service;
      }
    - |
      location ^~ /api/v1/candidatedetails {
          proxy_pass http://candidate-details-service;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires max;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location / {
          index index.html index.htm;
          try_files $uri $uri/ /index.html;
      }
    - |
      location ^~ /user {
          rewrite '^/user/(.*)$' '/$1' break;
          root /opt/futurx/services/hirest-webapp-v2;
          try_files $uri$args $uri$args/ /user/index.html;
      }
  hirest-webapp-v2-http:
    - listen 80
    - listen [::]:80
    - server_name ~^qa-(.*)\.hirest\.net$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }

  srk-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^qa-(.*)\.srk\.family$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  srk-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^qa-(.*)\.srk\.family$
    - ssl_certificate /etc/nginx/ssl/srk.family.chained.crt
    - ssl_certificate_key /etc/nginx/ssl/srk.family.key
    - root /opt/futurx/services/hirest-webapp
    - index index.html index.htm
    - add_header Content-Security-Policy "child-src 'self' https://*.serenaway.com https://docs.google.com https://www.youtube.com https://youtu.be https://res.cloudinary.com blob:"
    - |
      location ^~ /auth/v1/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /s/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /report/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /score/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /business/rules/v1/ {
          proxy_pass http://business-rule;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          proxy_pass http://dashboard-analytics;
      }
    - |
      location ^~ /serenaway/v1/ {
          proxy_pass http://customers-details;
      }
    - |
      location ^~ /serenaway/score/v1/ {
          proxy_pass http://score-service;
      }
    - |
      location ^~ /serenaway/report/v1/ {
          proxy_pass http://report-service;
      }
    - |
      location = /configms/v1/saveConfig {
        #   allow 13.71.30.188;
        #   deny all;
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /configms/v1/ {
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /hirest/v1/ {
          proxy_pass http://hirest-service;
      }
    - |
      location ^~ /consultancy/v1/ {
          proxy_pass http://consultancy-mgmt-service;
      }
    - |
      location ^~ /career/v1/ {
          proxy_pass http://career-mgmt-service;
      }
    - |
      location ^~ /api/v1/location {
          proxy_pass http://location-manager;
      }
    - |
      location ^~ /execute/sp/v1 {
          proxy_pass http://mssql-service;
      }
    - |
      location ^~ /consultancy/v2/ {
          proxy_pass http://consultancy-mgmt-service;
      }
    - |
      location ^~ /api/v1/zipcode {
          proxy_pass http://location-zip-service;
      }
    - |
      location /img/ {
          expires max;
          access_log off;
          root /mnt/appdata;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires max;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location / {
          index index.html index.htm;
          try_files $uri $uri/ /index.html;
      }

  howzthat-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^qa-(.*)\.howzthat\.io$
    - ssl_certificate /etc/nginx/ssl/serenaway.com.chained.crt
    - ssl_certificate_key /etc/nginx/ssl/serenaway.com.key
    - root /opt/futurx/services/HowzThat-Webapp
    - index index.html index.htm
    - |
      location ^~ /auth/v1/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /s/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /report/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /score/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /business/rules/v1/ {
          proxy_pass http://business-rule;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          proxy_pass http://dashboard-analytics;
      }
    - |
      location ^~ /serenaway/v1/ {
          proxy_pass http://customers-details;
      }
    - |
      location ^~ /serenaway/score/v1/ {
          proxy_pass http://score-service;
      }
    - |
      location ^~ /serenaway/report/v1/ {
          proxy_pass http://report-service;
      }
    - |
      location /img/ {
          expires max;
          access_log off;
          root /mnt/appdata;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires max;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location / {
          index index.html index.htm;
          try_files $uri $uri/ /index.html;
      }
  howzthat-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^qa-(.*)\.howzthat\.io$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  commonviu-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^qa-(.*)\.commonviu\.com$
    - ssl_certificate /etc/letsencrypt/live/qa-app.commonviu.com/fullchain.pem
    - ssl_certificate_key /etc/letsencrypt/live/qa-app.commonviu.com/privkey.pem
    - root /opt/futurx/services/CommonViu-Webapp
    - index index.html index.htm
    - |
      location ^~ /auth/v1/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /s/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /report/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /score/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /business/rules/v1/ {
          proxy_pass http://business-rule;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          proxy_pass http://dashboard-analytics;
      }
    - |
      location ^~ /serenaway/v1/ {
          proxy_pass http://customers-details;
      }
    - |
      location ^~ /serenaway/score/v1/ {
          proxy_pass http://score-service;
      }
    - |
      location ^~ /serenaway/report/v1/ {
          proxy_pass http://report-service;
      }
    - |
      location = /configms/v1/saveConfig {
        #   allow 13.71.30.188;
        #   deny all;
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /configms/v1/ {
          proxy_pass http://config-ms;
      }
    - |
      location /img/ {
          expires max;
          access_log off;
          root /mnt/appdata;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires max;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location / {
          index index.html index.htm;
          try_files $uri $uri/ /index.html;
      }
  commonviu-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^qa-(.*)\.commonviu\.com$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  steerhigh-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^qa-(.*)\.steerhigh\.com$
    - ssl_certificate /etc/nginx/ssl/steerhigh.com.chained.crt
    - ssl_certificate_key /etc/nginx/ssl/steerhigh.com.key
    - root /opt/futurx/services/Steerhigh-Webapp
    - |
      location ^~ /auth/v1/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /s/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /auth/v2/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /steerhigh/v3/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /report/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /score/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /sthi/v1/ {
          proxy_pass http://steerhigh-service;
      }
    - |
      location ^~ /sthi/v2/ {
          proxy_pass http://steerhigh-service;
      }
    - |
      location ^~ /sthi/score/v1/ {
          proxy_pass http://score-service;
      }
    - |
      location ^~ /assessment/score/v1/ {
          proxy_pass http://score-service;
      }
    - |
      location ^~ /sthi/v2/report/ {
          proxy_pass http://report-service;
      }
    - |
      location ^~ /sthi/v3/report/ {
          proxy_pass http://report-service;
      }
    - |
      location ^~ /sthi/v5/report/ {
          proxy_pass http://127.0.0.1:8088;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          proxy_pass http://dashboard-analytics;
      }
    - |
      location = /configms/v1/saveConfig {
        #   allow 13.71.30.188;
        #   deny all;
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /configms/v1/ {
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /analytics/v1/assessments/ {
          proxy_pass http://talent-success-analytics-service;
      }
    - |
      location ^~ /profile/v1/ {
          proxy_pass http://notifications-service;
      }
    - |
      location ^~ /user/v1/ {
          proxy_pass http://notifications-service;
      }
    - |
      location ^~ /scikey/v1/jobfitment {
          proxy_pass http://job-fitment-service;
      }
    - |
      location ^~ /scikey/v1/assessments {
          proxy_pass http://scikey-assessment-service;
      }
    - |
      location ^~ /scikey/v1/master {
          proxy_pass http://job-fitment-service;
      }
    - |
      location ^~ /featureMgmtConfigService/v1/ {
          proxy_pass http://feature-mgmt-config-service;
      }
    - |
      location ^~ /resume/v1/ {
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /resume/v2/ {
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /resume/v3/ {
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /resume/v4/ {
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /extraction/text {
          proxy_pass http://text-extraction-service;
      }
    - |
      location ^~ /pii/mgmt/v1/ {
          proxy_pass http://pii-mgmt-service;
      }
    - |
      location ^~ /api/v1/analytics/ {
          proxy_pass http://analytics-service;
      }
    - |
      location ^~ /v2/jobs {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /v1/jobs {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /v3/jobs {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /virtualAssistant/v1/ {
          proxy_pass http://hire-right-chat-bot-service;
      }
    - |
      location ^~ /job-master/v1/ {
          proxy_pass http://job-master-management-service;
      }
    - |
      location ^~ /scikey/workflow/v1/ {
          proxy_pass http://hiring-process-management-service;
      }
    - |
      location ^~ /api/v1/candidate {
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v1/candidates/match {
          proxy_pass http://candidate-match-service;
      }
    - |
      location ^~ /api/v2/candidates/match {
          proxy_pass http://candidate-match-service;
      }
    - |
      location ^~ /api/v3/candidates/match {
          proxy_pass http://candidate-match-service;
      }
    - |
      location ^~ /api/v4/candidates/match {
          proxy_pass http://candidate-match-service;
      }
    - |
      location ^~ /api/v5/candidates/match {
          proxy_pass http://candidate-match-service;
      }
    - |
      location ^~ /api/v1/location {
          proxy_pass http://location-manager;
      }
    - |
      location ^~ /api/v1/dashboard/candidate  {
          proxy_pass http://candidate-dashboard-service;
      }
    - |
      location ^~ /socket.io/ {
          proxy_pass http://10.0.4.4:8107;
          proxy_http_version 1.1;
          proxy_set_header Upgrade $http_upgrade;
          proxy_set_header Connection "Upgrade";
          proxy_set_header Host $host;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires max;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location / {
          index index.html index.htm;
          try_files $uri $uri/ /index.html;
      }
  steerhigh-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^qa-(.*)\.steerhigh\.com$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  scikey-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^qa-(.*)\.scikey\.ai$
    - ssl_certificate /etc/nginx/ssl/scikey.ai.chained.crt
    - ssl_certificate_key /etc/nginx/ssl/scikey.ai.key
    - add_header X-Frame-Options sameorigin
    - root /opt/futurx/services/Scikey-Candidate-Webapp
    - |
      if ($ip_region = eu) {
          rewrite ^ /notice/GDPR_notice.html last;
      }
    - location /notice {
          root /opt/futurx/services/Annoucements;
      }
    - |
      location ^~ /auth/v1/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /s/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /auth/v2/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /auth/v3/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /api/v1/feature {
          proxy_pass http://unleash-client-service;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /steerhigh/v3/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /report/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /score/v1/ {
          proxy_pass http://futurx-report;
      }
    - |
      location ^~ /sthi/v1/ {
          proxy_pass http://steerhigh-service;
      }
    - |
      location ^~ /sthi/v2/ {
          proxy_pass http://steerhigh-service;
      }
    - |
      location ^~ /sthi/score/v1/ {
          proxy_pass http://score-service;
      }
    - |
      location ^~ /assessment/score/v1/ {
          proxy_pass http://score-service;
      }
    - |
      location ^~ /sthi/v2/report/ {
          proxy_pass http://report-service;
      }
    - |
      location ^~ /sthi/v3/report/ {
          proxy_pass http://report-service;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          proxy_pass http://dashboard-analytics;
      }
    - |
      location = /configms/v1/saveConfig {
        #   allow 13.71.30.188;
        #   deny all;
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /configms/v1/ {
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /configms/v2/ {
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /analytics/v1/assessments/ {
          proxy_pass http://talent-success-analytics-service;
      }
    - |
      location ^~ /profile/v1/ {
          proxy_pass http://notifications-service;
      }
    - |
      location ^~ /user/v1/ {
          proxy_pass http://notifications-service;
      }
    - |
      location ^~ /scikey/v1/jobfitment {
          proxy_pass http://job-fitment-service;
      }
    - |
      location ^~ /scikey/v2/jobfitment {
          proxy_pass http://job-fitment-service;
      }
    - |
      location ^~ /scikey/v1/assessments {
          proxy_pass http://scikey-assessment-service;
      }
    - |
      location ^~ /scikey/v2/assessments {
          proxy_pass http://scikey-assessment-service;
      }
    - |
      location ^~ /scikey/v1/master {
          proxy_pass http://job-fitment-service;
      }
    - |
      location ^~ /featureMgmtConfigService/v1/ {
          proxy_pass http://feature-mgmt-config-service;
      }
    - |
      location ^~ /resume/v1/ {
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /resume/v2/ {
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /resume/v3/ {
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /resume/v4/ {
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /resume/v5/ {
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /resume/v6/ {
          proxy_pass http://resume-service;
      }
    - |
      location ^~ /extraction/text {
          proxy_pass http://text-extraction-service;
      }
    - |
      location ^~ /pii/mgmt/v1/ {
          proxy_pass http://pii-mgmt-service;
      }
    - |
      location ^~ /api/v1/analytics/ {
          proxy_pass http://analytics-service;
      }
    - |
      location ^~ /api/v2/analytics/ {
          proxy_pass http://analytics-service;
      }
    - |
      location ^~ /v1/lookup {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /v1/skills {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /v2/jobs {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /v1/jobs {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /v3/jobs {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /v4/jobs {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /v5/jobs {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /api/v1/get/assignee/details/ {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /api/v1/revoke/assign/job/permission {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /api/v1/update/assign/job/permission {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /virtualAssistant/v1/ {
          proxy_pass http://hire-right-chat-bot-service;
      }
    - |
      location ^~ /job-master/v1/ {
          proxy_pass http://job-master-management-service;
      }
    - |
      location ^~ /job-master/v2/ {
          proxy_pass http://job-master-management-service;
      }
    - |
      location ^~ /scikey/workflow/v1/ {
          proxy_pass http://hiring-process-management-service;
      }
    - |
      location ^~ /api/v1/candidate {
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v2/candidate {
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v3/candidate {
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v4/candidate {
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v1/candidates {
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v2/candidates {
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v3/candidates {
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v4/candidates {
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v1/location {
          proxy_pass http://location-manager;
      }
    - |
      location ^~ /smsTransportService/v1  {
          proxy_pass http://sms-transport-service;
      }
    - |
      location ^~  /api/v1/sms  {
          proxy_pass http://sms-transport-service;
      }
    - |
      location ^~ /api/v1/fresume  {
          proxy_pass http://fresume-service;
      }
    - |
      location ^~ /api/v2/fresume  {
          proxy_pass http://fresume-service;
      }
    - |
      location ^~ /api/v1/fresume/templates  {
          proxy_pass http://fresume-template-mgmt-service;
      }
    - |
      location ^~ /api/v1/resume  {
          proxy_pass http://resume-upload-service;
      }
    - |
      location ^~ /api/v2/resume  {
          proxy_pass http://resume-upload-service;
      }
    - |
      location ^~ /api/v3/resume  {
          proxy_pass http://resume-upload-service;
      }
    - |
      location ^~ /api/v3/resumes  {
          proxy_pass http://resume-upload-service;
      }
    - |
      location ^~ /api/v4/resumes  {
          proxy_pass http://resume-upload-service;
      }
    - |
      location ^~ /api/v1/hire/analytics  {
          proxy_pass http://hirer-analytics-service;
      }
    - |
      location ^~ /api/v2/hire/analytics  {
          proxy_pass http://hirer-analytics-service;
      }
    - |
      location ^~ /api/v3/hire/analytics  {
          proxy_pass http://hirer-analytics-service;
      }
    - |
      location ^~ /api/v1/metabase  {
          proxy_pass http://hirer-analytics-service;
      }
    - |
      location ^~ /api/v1/dashboard/candidate  {
          proxy_pass http://candidate-dashboard-service;
      }
    - |
      location ^~ /api/v1/job/interests  {
          proxy_pass http://job-interests-service;
      }
    - |
      location ^~ /api/v1/candidates/ {
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v1/org/ {
          proxy_pass http://org-hierarchy-service;
      }
    - |
      location ^~ /api/v1/contributor/ {
          proxy_pass http://contributor-mgmt-service;
      }
    - |
      location ^~ /api/v2/contributor/ {
          proxy_pass http://contributor-mgmt-service;
      }
    - |
      location ^~ /api/v1/gdpr/ {
          proxy_pass http://scikey-gdpr-service;
      }
    - |
      location ^~ /api/v1/extraction/data {
          proxy_pass http://data-extraction-service;
      }
    - |
      location ^~ /api/v1/hire/admin/ {
          proxy_pass http://hire-admin-mgmt-service;
      }
    - |
      location ^~ /scikey/v1/report/ {
          proxy_pass http://report-service;
      }
    - |
      location ^~ /api/v1/maskData  {
          proxy_pass http://data-mask-service;
      }
    - |
      location ^~ /api/v2/maskData  {
          proxy_pass http://data-mask-service;
      }
    - |
      location ^~ /api/v1/consents/ {
          proxy_pass http://consents-mgmt-service;
      }
    - |
      location ^~ /api/v1/candidates/match {
          proxy_pass http://candidate-match-service;
      }
    - |
      location ^~ /api/v2/candidates/match {
          proxy_pass http://candidate-match-service;
      }
    - |
      location ^~ /api/v3/candidates/match {
          proxy_pass http://candidate-match-service;
      }
    - |
      location ^~ /api/v4/candidates/match {
          proxy_pass http://candidate-match-service;
      }
    - |
      location ^~ /api/v5/candidates/match {
          proxy_pass http://candidate-match-service;
      }
    - |
      location ^~ /api/v1/skill/weightage/ {
          proxy_pass http://skill-price-weightage-service;
      }
    - |
      location ^~ /api/v1/base/price/ {
          proxy_pass http://base-price-weightage-service;
      }
    - |
      location ^~ /api/v1/location/weightage/ {
          proxy_pass http://location-price-weightage-service;
      }
    - |
      location ^~ /api/v1/experience/weightage/ {
          proxy_pass http://experience-price-weightage-service;
      }
    - |
      location ^~ /api/v1/reveal/ {
          proxy_pass http://data-reveal-service;
      }
    - |
      location ^~ /api/v1/price/ {
          proxy_pass http://price-management-service;
      }
    - |
      location ^~ /api/v1/payment/ {
          proxy_pass http://payment-gateway-service;
      }
    - |
      location ^~ /api/v1/data/quality/ {
          proxy_pass http://candidate-data-quality-mgmt-service;
      }
    - |
      location ^~ /api/v1/candidate/search {
          proxy_pass http://candidate-power-search;
      }
    - |
      location ^~ /api/v1/users {
          proxy_pass http://user-management-service;
      }
    - |
      location ^~ /api/v2/candidate/search {
          proxy_pass http://candidate-power-search;
      }
    - |
      location ^~ /api/v3/candidate/search {
          proxy_pass http://candidate-power-search;
      }
    - |
      location ^~ /api/v1/jobs/search {
          proxy_pass http://jobs-power-search;
      }
    - |
      location ^~ /api/v1/candidate/conversation {
          proxy_pass http://candidate-conversation-service;
      }
    - |
      location ^~ /api/v1/exotel {
          proxy_pass http://ivr-service;
      }
    - |
      location ^~ /api/v1/vendor {
          proxy_pass http://vendor-management-service;
      }
    - |
      location ^~ /api/v1/referral {
          proxy_pass http://referral-management-service;
      }
    - |
      location ^~ /api/v1/resumeViewer/ {
          proxy_pass http://resume-viewer-service;
      }
    - |
      location ^~ /api/v1/watermark {
          proxy_pass http://watermark-mgmt-service;
      }
    - |
      location ^~ /api/v1/client {
          proxy_pass http://client-db-service;
      }
    - |
      location ^~ /api/v1/entity {
          proxy_pass http://blacklisting-entity-service;
      }
    - |
      location ^~ /api/v1/signature/ {
          proxy_pass http://digital-signature-service;
      }
    - |
      location ^~ /api/v1/role/  {
          proxy_pass http://127.0.0.1:8091;
      }
    - |
      location ^~ /api/v1/token/  {
          proxy_pass http://127.0.0.1:8090;
      }
    - |
      location ^~ /api/v1/save/assign/job/details {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /socket.io/ {
          proxy_pass http://10.0.4.4:8107;
          proxy_http_version 1.1;
          proxy_set_header Upgrade $http_upgrade;
          proxy_set_header Connection "Upgrade";
          proxy_set_header Host $host;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires max;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location ^~ /steerhigh/html/login/ {
          return 301 https://$host/login;
      }
    - |
      location ^~ /steerhigh/html/index/ {
          return 301 https://$host/login;
      }
    - |
      location ^~ /steerhigh/html/register/ {
          return 301 https://$host/public/signUp;
      }
    - |
      location ^~ /api/v1/company/legal_entity {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /api/v1/check/registered/company {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /api/v1/jobs/legalEntity {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /contributor {
          return 301 https://$host/seller/login;
      }
    - |
      location ^~ /hirer {
          rewrite '^/hirer/(.*)$' '/$1' break;
          root /opt/futurx/services/Scikey-Hirer-Webapp;
          try_files $uri$args $uri$args/ /hirer/index.html;
      }
    - |
      location ^~ /candidate {
          rewrite '^/candidate/(.*)$' '/$1' break;
          root /opt/futurx/services/Scikey-Candidate-Webapp;
          try_files $uri$args $uri$args/ /candidate/index.html;
      }
    - |
      location ^~ /admin {
          rewrite '^/admin/(.*)$' '/$1' break;
          root /opt/futurx/services/Scikey-Admin-Webapp;
          try_files $uri$args $uri$args/ /admin/index.html;
      }
    - |
      location ^~ /seller {
          rewrite '^/seller/(.*)$' '/$1' break;
          root /opt/futurx/services/Scikey-Contributor-Webapp;
          try_files $uri$args $uri$args/ /seller/index.html;
      }
    - |
      location ^~ /manager {
          rewrite '^/manager/(.*)$' '/$1' break;
          root /opt/futurx/services/Scikey-Manager-Webapp;
          try_files $uri$args $uri$args/ /manager/index.html;
      }
    - |
      location ^~ /mtbase/dashboards/ {
          proxy_pass http://metabase-service;
          rewrite ^/mtbase/dashboards/(.*) /$1 break;
      }
    - |
      location ^~ /employee {
          rewrite '^/employee/(.*)$' '/$1' break;
          root /opt/futurx/services/Scikey-Employee-Webapp;
          try_files $uri$args $uri$args/ /employee/index.html;
      }
    - |
      location ^~ /talentcommerce {
          rewrite '^/talentcommerce/(.*)$' '/$1' break;
          root /opt/futurx/services/Scikey-TalentCommerce-Webapp;
          try_files $uri$args $uri$args/ /talentcommerce/index.html;
      }
    - |
      location ^~ /api/v1/mail {
          proxy_pass http://127.0.0.1:8114;
      }
    - |
      location ^~ /api/v1/parse {
          proxy_pass http://hireability-integration-service;
      }
    - |
      location / {
          index index.html index.htm;
          try_files $uri $uri/ /index.html;
      }
    - |
      location ^~ /fresumes {
          alias /opt/futurx/services/fresumes-webapp;
      }
  scikey-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^qa-(.*)\.scikey\.ai$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  futurxlabs-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^(?!.*(qa-portal)).*\.futurxlabs\.com$
    - ssl_certificate /etc/letsencrypt/live/qa-portal.futurxlabs.com/fullchain.pem
    - ssl_certificate_key /etc/letsencrypt/live/qa-portal.futurxlabs.com/privkey.pem
    - root /opt/futurx/services/futurx-web
    - return 301 $scheme://qa-public.scikey.ai$request_uri
  futurxlabs-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^(?!.*(qa-portal)).*\.futurxlabs\.com$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://qa-public.scikey.ai$request_uri;
      }
  futurxlabs-portal:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name qa-portal.futurxlabs.com
    - ssl_certificate /etc/letsencrypt/live/qa-portal.futurxlabs.com/fullchain.pem
    - ssl_certificate_key /etc/letsencrypt/live/qa-portal.futurxlabs.com/privkey.pem
    - |
      location /phpmyadmin/ {
          proxy_pass http://127.0.0.1:8881/;
      }
    - |
      location / {
          proxy_pass http://127.0.0.1:9090/;
      }
  futurxlabs-portal-http:
    - listen 80
    - listen [::]:80
    - server_name qa-portal.futurxlabs.com
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  scikey-admin-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^qa-(.*)\.scikey\.io$
    - ssl_certificate /etc/letsencrypt/live/qa-futurxlabs.scikey.io/fullchain.pem
    - ssl_certificate_key /etc/letsencrypt/live/qa-futurxlabs.scikey.io/privkey.pem
    - root /opt/futurx/services/Scikey-Webapp
    - |
      location ^~ /auth/v1/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /s/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /auth/v2/ {
          proxy_pass http://auth-service;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /steerhigh/v3/ {
          proxy_pass http://survey-service;
      }
    - |
      location ^~ /assessment/score/v1/ {
          proxy_pass http://score-service;
      }
    - |
      location ^~ /sthi/v2/report/ {
          proxy_pass http://report-service;
      }
    - |
      location ^~ /sthi/v3/report/ {
          proxy_pass http://report-service;
      }
    - |
      location = /configms/v1/saveConfig {
        #   allow 13.71.30.188;
        #   deny all;
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /configms/v1/ {
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /configms/v2/ {
          proxy_pass http://config-ms;
      }
    - |
      location ^~ /analytics/v1/assessments/ {
          proxy_pass http://talent-success-analytics-service;
      }
    - |
      location ^~ /profile/v1/ {
          proxy_pass http://notifications-service;
      }
    - |
      location ^~ /user/v1/ {
          proxy_pass http://notifications-service;
      }
    - |
      location ^~ /scikey/v1/dictionaries {
          proxy_pass http://job-fitment-service;
      }
    - |
      location ^~ /scikey/v1/jobfitment {
          proxy_pass http://job-fitment-service;
      }
    - |
      location ^~ /scikey/v1/assessments {
          proxy_pass http://scikey-assessment-service;
      }
    - |
      location ^~ /featureMgmtConfigService/v1/ {
          proxy_pass http://feature-mgmt-config-service;
      }
    - |
      location ^~ /pii/mgmt/v1/ {
          proxy_pass http://pii-mgmt-service;
      }
    - |
      location ^~ /api/v1/location {
          proxy_pass http://location-manager;
      }
    - |
      location ^~ /api/v1/scikey/score {
          proxy_pass http://scikey-scores-master-service;
      }
    - |
      location ^~ /v1/lookup {
          proxy_pass http://jobs-mgmt-service;
      }
    - |
      location ^~ /api/v1/hire/admin {
          proxy_pass http://hire-admin-mgmt-service;
      }
    - |
      location ^~ /api/v1/candidates/ {
          proxy_pass http://candidate-mgmt-service;
      }
    - |
      location ^~ /api/v1/dashboard/candidate  {
          proxy_pass http://candidate-dashboard-service;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires 7d;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location / {
          index index.html index.htm;
          try_files $uri $uri/ /index.html;
      }
  scikey-admin-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^qa-(.*)\.scikey\.io$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  scikey-public-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name qa-public.scikey.ai
    - ssl_certificate /etc/nginx/ssl/scikey.ai.chained.crt
    - ssl_certificate_key /etc/nginx/ssl/scikey.ai.key
    - root /opt/futurx/services/scikey-public
    - return 301 $scheme://qa-hire.scikey.ai$request_uri
  scikey-public-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name qa-public.scikey.ai
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://qa-hire.scikey.ai$request_uri;
      }
  scikey-redash-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name qa-rdsh.scikey.ai
    - ssl_certificate /etc/nginx/ssl/scikey.ai.chained.crt
    - ssl_certificate_key /etc/nginx/ssl/scikey.ai.key
    - add_header Content-Security-Policy "frame-ancestors 'self' https://qa-hire.scikey.ai"
    - |
      location / {
          proxy_pass http://127.0.0.1:5000;
      }
  scikey-redash-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name qa-rdsh.scikey.ai
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
nginx_remove_sites:         []

nginx_daemon_mode:          "on"
