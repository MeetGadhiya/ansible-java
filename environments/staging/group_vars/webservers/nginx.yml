---

# The user to run nginx
nginx_user:                  "www-data"
nginx_group:                 "{{nginx_user}}"
nginx_worker_processes:      "auto"
nginx_worker_rlimit_nofile:  1024
nginx_log_dir:               "/var/log/nginx"
nginx_error_log_level:       "warn"

# A list of directives for the events section.
nginx_events_params:
  - worker_connections 768
  - use epoll
  - multi_accept on

nginx_http_params:
  - sendfile on
  - tcp_nopush on
  - tcp_nodelay on
  - log_format main '$remote_addr - $remote_user [$time_local]  $status ' '"$request" $body_bytes_sent "$http_referer" ' '"$http_user_agent" "$http_x_forwarded_for"'
  - access_log /var/log/nginx/access.log main buffer=8k
  - error_log /var/log/nginx/error.log
  - server_names_hash_bucket_size 128
  - open_file_cache max=200000 inactive=20s
  - open_file_cache_valid 30s
  - open_file_cache_min_uses 2
  - open_file_cache_errors on
  - reset_timedout_connection on
  - client_body_timeout 120s
  - send_timeout 120s
  - keepalive_timeout 120s
  - keepalive_requests 100000
  - underscores_in_headers on

nginx_configs:
  ssl:
    - ssl_protocols TLSv1 TLSv1.1 TLSv1.2
    - ssl_prefer_server_ciphers on
    - ssl_ciphers "EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH"
    - ssl_ecdh_curve secp384r1
    - ssl_session_cache shared:SSL:10m
    - ssl_session_tickets off
    - ssl_stapling on
    - ssl_stapling_verify on
    - resolver 8.8.8.8 8.8.4.4 valid=300s
    - resolver_timeout 60s
    - |
      add_header Strict-Transport-Security "max-age=63072000; includeSubDomains; preload";
    - add_header X-Content-Type-Options nosniff
    - ssl_dhparam /etc/ssl/certs/dhparam.pem
  proxy:
    - proxy_redirect          off
    - proxy_set_header        Host $host
    - proxy_set_header        X-Real-IP  $remote_addr
    - proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for
    - client_max_body_size    100m
    - client_body_buffer_size 128k
    - proxy_connect_timeout   90
    - proxy_send_timeout      90
    - proxy_read_timeout      90
    - proxy_buffers           32 4k
  gzip:
    - gzip                    on
    - gzip_min_length         1000
    - gunzip                  on
    - gzip_vary               on
    - gzip_proxied            expired no-cache no-store private auth
    - gzip_types              text/plain text/css text/xml text/javascript application/javascript application/x-javascript application/json application/xml
    - gzip_disable            msie6
  geoip:
    - |
      map $geoip_city_continent_code $ip_region {
          EU eu;
          NA na;
          AS as;
          AF af;
      }
    - geoip_city /usr/share/GeoIP/GeoLiteCity.dat

nginx_sites:
  default:
    - listen 80 default_server
    - listen [::]:80 default_server
    - server_name _
    - |
      location /test/v1/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location / {
          deny all;
      }
  serenaway-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^dev-(.*)\.serenaway\.com$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  serenaway-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^dev-(?<client>.+)\.serenaway\.com$
    - ssl_certificate /etc/nginx/ssl/serenaway.com.chained.crt
    - ssl_certificate_key /etc/nginx/ssl/serenaway.com.key
    - root /opt/futurx/services/SerenaWay-Desktop-Web
    - index index.html index.htm
    - add_header Content-Security-Policy "frame-ancestors 'self' https://*.hirest.net"
    - set $doBlock false
    - |
      if ($ip_region = eu) {
          set $doBlock true;
      }
    - if ($client = enrich) {
          set $doBlock false;
      }
    - if ($client = app) {
          set $doBlock false;
      }
    - if ($doBlock = true) {
          rewrite ^ /notice/serenaway/GDPR_notice.html last;
      }
    - location /notice {
          root /opt/futurx/services/Annoucements;
      }
    - |
      location ^~ /auth/v1/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /s/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /report/v1/ {
          proxy_pass http://127.0.0.1:8083;
      }
    - |
      location ^~ /score/v1/ {
          proxy_pass http://127.0.0.1:8083;
      }
    - |
      location ^~ /business/rules/v1/ {
          proxy_pass http://127.0.0.1:8085;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          proxy_pass http://127.0.0.1:8084;
      }
    - |
      location ^~ /serenaway/v1/ {
          proxy_pass http://127.0.0.1:8086;
      }
    - |
      location ^~ /serenaway/score/v1/ {
          proxy_pass http://127.0.0.1:8087;
      }
    - |
      location ^~ /assessment/score/v1/ {
          proxy_pass http://127.0.0.1:8087;
      }
    - |
      location ^~ /serenaway/report/v1/ {
          proxy_pass http://127.0.0.1:8088;
      }
    - |
      location ^~ /excelMapping/v1/ {
          proxy_pass http://127.0.0.1:8100;
      }
    - |
      location ^~ /hotelDashboardAnalytics/v1/ {
          proxy_pass http://127.0.0.1:8101;
      }
    - |
      location ^~ /hotelDashboardAnalytics/v2/ {
          proxy_pass http://127.0.0.1:8101;
      }
    - |
      location ^~ /featureMgmtConfigService/v1/ {
          proxy_pass http://127.0.0.1:8099;
      }
    - |
      location ^~ /configms/v1/ {
          proxy_pass http://127.0.0.1:8092;
      }
    - |
      location ^~ /api/v1/location {
          proxy_pass http://127.0.0.1:8115;
      }
    - |
      location ^~ /api/v1/mail {
          proxy_pass http://127.0.0.1:8114;
      }
    - |
      location ^~ /smsTransportService/v1  {
          proxy_pass http://127.0.0.1:8118;
      }
    - |
      location /img/ {
          expires -1;
          access_log off;
          root /mnt/appdata;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires -1;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location ^~ /assets/clients {
          root /opt/futurx/services/SerenaWay-Clients-Assets;
      }
    - |
      location /index.html {
          root /opt/futurx/services/SerenaWay-Clients-Assets;
          try_files /assets/clients/$client/index.html /index.html;
      }
    - |
      location / {
          try_files $uri $uri/ /index.html;
      }
  hirest-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^dev-(.*)\.hirest\.net$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  hirest-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^dev-(.*)\.hirest\.net$
    - ssl_certificate /etc/nginx/ssl/hirest.net.chained.crt
    - ssl_certificate_key /etc/nginx/ssl/hirest.net.key
    - root /opt/futurx/services/hirest-webapp
    - index index.html index.htm
    - client_body_timeout 400s
    - send_timeout 400s
    - keepalive_timeout 400s
    - proxy_connect_timeout   400
    - proxy_send_timeout      400
    - proxy_read_timeout      400
    - add_header Content-Security-Policy "child-src 'self' https://*.serenaway.com https://docs.google.com https://www.youtube.com https://youtu.be https://res.cloudinary.com blob:"
    - |
      location ^~ /auth/v1/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /s/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /report/v1/ {
          proxy_pass http://127.0.0.1:8083;
      }
    - |
      location ^~ /score/v1/ {
          proxy_pass http://127.0.0.1:8083;
      }
    - |
      location ^~ /business/rules/v1/ {
          proxy_pass http://127.0.0.1:8085;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          proxy_pass http://127.0.0.1:8084;
      }
    - |
      location ^~ /serenaway/v1/ {
          proxy_pass http://127.0.0.1:8086;
      }
    - |
      location ^~ /serenaway/score/v1/ {
          proxy_pass http://127.0.0.1:8087;
      }
    - |
      location ^~ /serenaway/report/v1/ {
          proxy_pass http://127.0.0.1:8088;
      }
    - |
      location = /configms/v1/saveConfig {
        #   allow 13.71.31.57;
        #   deny all;
          proxy_pass http://127.0.0.1:8092;
      }
    - |
      location ^~ /configms/v1/ {
          proxy_pass http://127.0.0.1:8092;
      }
    - |
      location ^~ /hirest/v1/ {
          proxy_pass http://127.0.0.1:8094;
      }
    - |
      location ^~ /consultancy/v1/ {
          proxy_pass http://127.0.0.1:8109;
      }
    - |
      location ^~ /career/v1/ {
          proxy_pass http://127.0.0.1:8110;
      }
    - |
      location ^~ /api/v1/location {
          proxy_pass http://127.0.0.1:8115;
      }
    - |
      location ^~ /execute/sp/v1 {
          proxy_pass http://127.0.0.1:8117;
      }
    - |
      location ^~ /api/v1/zipcode {
          proxy_pass http://127.0.0.1:8121;
      }
    - |
      location /img/ {
          expires max;
          access_log off;
          root /mnt/appdata;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires max;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location / {
          index index.html index.htm;
          try_files $uri $uri/ /index.html;
      }
  howzthat-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^dev-(.*)\.howzthat\.io$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  howzthat-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^dev-(.*)\.howzthat\.io$
    - ssl_certificate /etc/letsencrypt/live/dev-app.howzthat.io/fullchain.pem
    - ssl_certificate_key /etc/letsencrypt/live/dev-app.howzthat.io/privkey.pem
    - root /opt/futurx/services/HowzThat-Webapp
    - index index.html index.htm
    - |
      location ^~ /auth/v1/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /s/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /report/v1/ {
          proxy_pass http://127.0.0.1:8083;
      }
    - |
      location ^~ /score/v1/ {
          proxy_pass http://127.0.0.1:8083;
      }
    - |
      location ^~ /business/rules/v1/ {
          proxy_pass http://127.0.0.1:8085;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          proxy_pass http://127.0.0.1:8084;
      }
    - |
      location ^~ /serenaway/v1/ {
          proxy_pass http://127.0.0.1:8086;
      }
    - |
      location ^~ /serenaway/score/v1/ {
          proxy_pass http://127.0.0.1:8087;
      }
    - |
      location ^~ /serenaway/report/v1/ {
          proxy_pass http://127.0.0.1:8088;
      }
    - |
      location /img/ {
          expires max;
          access_log off;
          root /mnt/appdata;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires max;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location / {
          index index.html index.htm;
          try_files $uri $uri/ /index.html;
      }
  commonviu-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^dev-(.*)\.commonviu\.com$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  commonviu-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^dev-(.*)\.commonviu\.com$
    - ssl_certificate /etc/letsencrypt/live/dev-app.commonviu.com/fullchain.pem
    - ssl_certificate_key /etc/letsencrypt/live/dev-app.commonviu.com/privkey.pem
    - root /opt/futurx/services/CommonViu-Webapp
    - index index.html index.htm
    - |
      location ^~ /auth/v1/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /s/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /report/v1/ {
          proxy_pass http://127.0.0.1:8083;
      }
    - |
      location ^~ /score/v1/ {
          proxy_pass http://127.0.0.1:8083;
      }
    - |
      location ^~ /business/rules/v1/ {
          proxy_pass http://127.0.0.1:8085;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          proxy_pass http://127.0.0.1:8084;
      }
    - |
      location ^~ /serenaway/v1/ {
          proxy_pass http://127.0.0.1:8086;
      }
    - |
      location ^~ /serenaway/score/v1/ {
          proxy_pass http://127.0.0.1:8087;
      }
    - |
      location ^~ /serenaway/report/v1/ {
          proxy_pass http://127.0.0.1:8088;
      }
    - |
      location = /configms/v1/saveConfig {
        #   allow 13.71.31.57;
        #   deny all;
          proxy_pass http://127.0.0.1:8092;
      }
    - |
      location ^~ /configms/v1/ {
          proxy_pass http://127.0.0.1:8092;
      }
    - |
      location /img/ {
          expires max;
          access_log off;
          root /mnt/appdata;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires max;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location / {
          index index.html index.htm;
          try_files $uri $uri/ /index.html;
      }
  steerhigh-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^dev-(.*)\.steerhigh\.com$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  steerhigh-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^dev-(.*)\.steerhigh\.com$
    - ssl_certificate /etc/nginx/ssl/steerhigh.com.chained.crt
    - ssl_certificate_key /etc/nginx/ssl/steerhigh.com.key
    - root /opt/futurx/services/Steerhigh-Webapp
    - |
      location ^~ /auth/v1/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /s/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /auth/v2/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /steerhigh/v3/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /report/v1/ {
          proxy_pass http://127.0.0.1:8083;
      }
    - |
      location ^~ /score/v1/ {
          proxy_pass http://127.0.0.1:8083;
      }
    - |
      location ^~ /sthi/v1/ {
          proxy_pass http://127.0.0.1:8089;
      }
    - |
      location ^~ /sthi/v2/ {
          proxy_pass http://127.0.0.1:8089;
      }
    - |
      location ^~ /sthi/score/v1/ {
          proxy_pass http://127.0.0.1:8087;
      }
    - |
      location ^~ /assessment/score/v1/ {
          proxy_pass http://127.0.0.1:8087;
      }
    - |
      location ^~ /sthi/v2/report/ {
          proxy_pass http://127.0.0.1:8088;
      }
    - |
      location ^~ /sthi/v3/report/ {
          proxy_pass http://127.0.0.1:8088;
      }
    - |
      location ^~ /sthi/v5/report/ {
          proxy_pass http://127.0.0.1:8088;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          proxy_pass http://127.0.0.1:8084;
      }
    - |
      location = /configms/v1/saveConfig {
        #   allow 13.71.31.57;
        #   deny all;
          proxy_pass http://127.0.0.1:8092;
      }
    - |
      location ^~ /configms/v1/ {
          proxy_pass http://127.0.0.1:8092;
      }
    - |
      location ^~ /analytics/v1/assessments/ {
          proxy_pass http://127.0.0.1:8095;
      }
    - |
      location ^~ /profile/v1/ {
          proxy_pass http://127.0.0.1:8096;
      }
    - |
      location ^~ /user/v1/ {
          proxy_pass http://127.0.0.1:8096;
      }
    - |
      location ^~ /scikey/v1/jobfitment {
          proxy_pass http://127.0.0.1:8097;
      }
    - |
      location ^~ /scikey/v1/assessments {
          proxy_pass http://127.0.0.1:8098;
      }
    - |
      location ^~ /scikey/v1/master {
          proxy_pass http://127.0.0.1:8097;
      }
    - |
      location ^~ /featureMgmtConfigService/v1/ {
          proxy_pass http://127.0.0.1:8099;
      }
    - |
      location ^~ /resume/v1/ {
          proxy_pass http://127.0.0.1:8102;
      }
    - |
      location ^~ /resume/v2/ {
          proxy_pass http://127.0.0.1:8102;
      }
    - |
      location ^~ /resume/v3/ {
          proxy_pass http://127.0.0.1:8102;
      }
    - |
      location ^~ /resume/v4/ {
          proxy_pass http://127.0.0.1:8102;
      }
    - |
      location ^~ /extraction/text {
          proxy_pass http://127.0.0.1:8103;
      }
    - |
      location ^~ /pii/mgmt/v1/ {
          proxy_pass http://127.0.0.1:8104;
      }
    - |
      location ^~ /api/v1/analytics/ {
          proxy_pass http://127.0.0.1:8105;
      }
    - |
      location ^~ /v2/jobs {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /v1/jobs {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /v3/jobs {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /virtualAssistant/v1/ {
          proxy_pass http://127.0.0.1:8107;
      }
    - |
      location ^~ /job-master/v1/ {
          proxy_pass http://127.0.0.1:8111;
      }
    - |
      location ^~ /scikey/workflow/v1/ {
          proxy_pass http://127.0.0.1:8112;
      }
    - |
      location ^~ /api/v1/candidate {
          proxy_pass http://127.0.0.1:8113;
      }
    - |
      location ^~ /api/v1/location {
          proxy_pass http://127.0.0.1:8115;
      }
    - |
      location ^~ /api/v1/dashboard/candidate  {
          proxy_pass http://127.0.0.1:8125;
      }
    - |
      location ^~ /api/v1/candidates/match {
          proxy_pass http://127.0.0.1:8135;
      }
    - |
      location ^~ /api/v2/candidates/match {
          proxy_pass http://127.0.0.1:8135;
      }
    - |
      location ^~ /api/v3/candidates/match {
          proxy_pass http://127.0.0.1:8135;
      }
    - |
      location ^~ /api/v4/candidates/match {
          proxy_pass http://127.0.0.1:8135;
      }
    - |
      location ^~ /api/v5/candidates/match {
          proxy_pass http://127.0.0.1:8135;
      }
    - |
      location ^~ /api/v1/watermark {
          proxy_pass http://127.0.0.1:8162;
      }
    - |
      location ^~ /socket.io/ {
          proxy_pass http://127.0.0.1:8107;
          proxy_http_version 1.1;
          proxy_set_header Upgrade $http_upgrade;
          proxy_set_header Connection "Upgrade";
          proxy_set_header Host $host;
      }
    - |
      location ^~ /static/html {
          alias /opt/futurx/services/Steerhigh-HTML;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires 7d;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location / {
          index index.html index.htm;
          try_files $uri $uri/ /index.html;
      }
  scikey-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^staging-(?<client>.+)\.scikey\.ai$
    - ssl_certificate /etc/nginx/ssl/scikey.ai.chained.crt
    - ssl_certificate_key /etc/nginx/ssl/scikey.ai.key
    - root /opt/futurx/services/Scikey-Candidate-Webapp
    - |
      if ($ip_region = eu) {
          rewrite ^ /notice/GDPR_notice.html last;
      }
    - location /notice {
          root /opt/futurx/services/Annoucements;
      }
    - |
      location ^~ /auth/v1/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /s/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /auth/v2/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /auth/v3/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /steerhigh/v3/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /report/v1/ {
          proxy_pass http://127.0.0.1:8083;
      }
    - |
      location ^~ /score/v1/ {
          proxy_pass http://127.0.0.1:8083;
      }
    - |
      location ^~ /sthi/v1/ {
          proxy_pass http://127.0.0.1:8089;
      }
    - |
      location ^~ /sthi/v2/ {
          proxy_pass http://127.0.0.1:8089;
      }
    - |
      location ^~ /sthi/score/v1/ {
          proxy_pass http://127.0.0.1:8087;
      }
    - |
      location ^~ /assessment/score/v1/ {
          proxy_pass http://127.0.0.1:8087;
      }
    - |
      location ^~ /sthi/v2/report/ {
          proxy_pass http://127.0.0.1:8088;
      }
    - |
      location ^~ /sthi/v3/report/ {
          proxy_pass http://127.0.0.1:8088;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          proxy_pass http://127.0.0.1:8084;
      }
    - |
      location = /configms/v1/saveConfig {
        #   allow 13.71.31.57;
        #   deny all;
          proxy_pass http://127.0.0.1:8092;
      }
    - |
      location ^~ /configms/v1/ {
          proxy_pass http://127.0.0.1:8092;
      }
    - |
      location ^~ /configms/v2/ {
          proxy_pass http://127.0.0.1:8092;
      }
    - |
      location ^~ /analytics/v1/assessments/ {
          proxy_pass http://127.0.0.1:8095;
      }
    - |
      location ^~ /profile/v1/ {
          proxy_pass http://127.0.0.1:8096;
      }
    - |
      location ^~ /user/v1/ {
          proxy_pass http://127.0.0.1:8096;
      }
    - |
      location ^~ /scikey/v1/jobfitment {
          proxy_pass http://127.0.0.1:8097;
      }
    - |
      location ^~ /scikey/v2/jobfitment {
          proxy_pass http://127.0.0.1:8097;
      }
    - |
      location ^~ /scikey/v1/assessments {
          proxy_pass http://127.0.0.1:8098;
      }
    - |
      location ^~ /scikey/v2/assessments {
          proxy_pass http://127.0.0.1:8098;
      }
    - |
      location ^~ /scikey/v1/master {
          proxy_pass http://127.0.0.1:8097;
      }
    - |
      location ^~ /featureMgmtConfigService/v1/ {
          proxy_pass http://127.0.0.1:8099;
      }
    - |
      location ^~ /resume/v1/ {
          proxy_pass http://127.0.0.1:8102;
      }
    - |
      location ^~ /resume/v2/ {
          proxy_pass http://127.0.0.1:8102;
      }
    - |
      location ^~ /resume/v3/ {
          proxy_pass http://127.0.0.1:8102;
      }
    - |
      location ^~ /resume/v4/ {
          proxy_pass http://127.0.0.1:8102;
      }
    - |
      location ^~ /resume/v5/ {
          proxy_pass http://127.0.0.1:8102;
      }
    - |
      location ^~ /resume/v6/ {
          proxy_pass http://127.0.0.1:8102;
      }
    - |
      location ^~ /extraction/text {
          proxy_pass http://127.0.0.1:8103;
      }
    - |
      location ^~ /pii/mgmt/v1/ {
          proxy_pass http://127.0.0.1:8104;
      }
    - |
      location ^~ /api/v1/analytics/ {
          proxy_pass http://127.0.0.1:8105;
      }
    - |
      location ^~ /api/v2/analytics/ {
          proxy_pass http://127.0.0.1:8105;
      }
    - |
      location ^~ /v1/jobs {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /v2/jobs {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /v3/jobs {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /v4/jobs {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /v5/jobs {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /api/v1/get/assignee/details/ {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /api/v1/revoke/assign/job/permission {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /api/v1/update/assign/job/permission {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /api/v1/save/assign/job/details  {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /v1/lookup {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /v1/skills {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /virtualAssistant/v1/ {
          proxy_pass http://127.0.0.1:8107;
      }
    - |
      location ^~ /job-master/v1/ {
          proxy_pass http://127.0.0.1:8111;
      }
    - |
      location ^~ /job-master/v2/ {
          proxy_pass http://127.0.0.1:8111;
      }
    - |
      location ^~ /scikey/workflow/v1/ {
          proxy_pass http://127.0.0.1:8112;
      }
    - |
      location ^~ /api/v1/candidate {
          proxy_pass http://127.0.0.1:8113;
      }
    - |
      location ^~ /api/v2/candidate {
          proxy_pass http://127.0.0.1:8113;
      }
    - |
      location ^~ /api/v3/candidate {
          proxy_pass http://127.0.0.1:8113;
      }
    - |
      location ^~ /api/v4/candidate {
          proxy_pass http://127.0.0.1:8113;
      }
    - |
      location ^~ /api/v1/candidates {
          proxy_pass http://127.0.0.1:8113;
      }
    - |
      location ^~ /api/v2/candidates {
          proxy_pass http://127.0.0.1:8113;
      }
    - |
      location ^~ /api/v3/candidates {
          proxy_pass http://127.0.0.1:8113;
      }
    - |
      location ^~ /api/v4/candidates {
          proxy_pass http://127.0.0.1:8113;
      }
    - |
      location ^~ /api/v1/location {
          proxy_pass http://127.0.0.1:8115;
      }
    - |
      location ^~ /smsTransportService/v1  {
          proxy_pass http://127.0.0.1:8118;
      }
    - |
      location ^~  /api/v1/sms  {
          proxy_pass http://127.0.0.1:8118;
      }
    - |
      location ^~ /api/v1/fresume  {
          proxy_pass http://127.0.0.1:8119;
      }
    - |
      location ^~ /api/v2/fresume  {
          proxy_pass http://127.0.0.1:8119;
      }
    - |
      location ^~ /api/v1/fresume/templates  {
          proxy_pass http://127.0.0.1:8120;
      }
    - |
      location ^~ /api/v1/resume  {
          proxy_pass http://127.0.0.1:8122;
      }
    - |
      location ^~ /api/v2/resume  {
          proxy_pass http://127.0.0.1:8122;
      }
    - |
      location ^~ /api/v3/resume  {
          proxy_pass http://127.0.0.1:8122;
      }
    - |
      location ^~ /api/v3/resumes  {
          proxy_pass http://127.0.0.1:8122;
      }
    - |
      location ^~ /api/v4/resumes  {
          proxy_pass http://127.0.0.1:8122;
      }
    - |
      location ^~ /api/v1/hire/analytics  {
          proxy_pass http://127.0.0.1:8123;
      }
    - |
      location ^~ /api/v2/hire/analytics  {
          proxy_pass http://127.0.0.1:8123;
      }
    - |
      location ^~ /api/v3/hire/analytics  {
          proxy_pass http://127.0.0.1:8123;
      }
    - |
      location ^~ /api/v1/metabase  {
          proxy_pass http://127.0.0.1:8123;
      }
    - |
      location ^~ /api/v1/dashboard/candidate  {
          proxy_pass http://127.0.0.1:8125;
      }
    - |
      location ^~ /api/v1/job/interests  {
          proxy_pass http://127.0.0.1:8126;
      }
    - |
      location ^~ /api/v1/candidates/ {
          proxy_pass http://127.0.0.1:8113;
      }
    - |
      location ^~ /api/v1/org/ {
          proxy_pass http://127.0.0.1:8127;
      }
    - |
      location ^~ /api/v1/contributor/ {
          proxy_pass http://127.0.0.1:8130;
      }
    - |
      location ^~ /api/v2/contributor/ {
          proxy_pass http://127.0.0.1:8130;
      }
    - |
      location ^~ /api/v1/gdpr/ {
          proxy_pass http://127.0.0.1:8128;
      }
    - |
      location ^~ /api/v1/extraction/data {
          proxy_pass http://127.0.0.1:8129;
      }
    - |
      location ^~ /api/v1/hire/admin/ {
          proxy_pass http://127.0.0.1:8124;
      }
    - |
      location ^~ /api/v1/maskData  {
          proxy_pass http://127.0.0.1:8132;
      }
    - |
      location ^~ /api/v2/maskData  {
          proxy_pass http://127.0.0.1:8132;
      }
    - |
      location ^~ /scikey/v1/report/ {
          proxy_pass http://127.0.0.1:8088;
      }
    - |
      location ^~ /api/v1/consents/ {
          proxy_pass http://127.0.0.1:8131;
      }
    - |
      location ^~ /api/v1/candidates/match {
          proxy_pass http://127.0.0.1:8135;
      }
    - |
      location ^~ /api/v2/candidates/match {
          proxy_pass http://127.0.0.1:8135;
      }
    - |
      location ^~ /api/v3/candidates/match {
          proxy_pass http://127.0.0.1:8135;
      }
    - |
      location ^~ /api/v4/candidates/match {
          proxy_pass http://127.0.0.1:8135;
      }
    - |
      location ^~ /api/v5/candidates/match {
          proxy_pass http://127.0.0.1:8135;
      }
    - |
      location ^~ /api/v1/skill/weightage/ {
          proxy_pass http://127.0.0.1:8133;
      }
    - |
      location ^~ /api/v1/base/price/ {
          proxy_pass http://127.0.0.1:8134;
      }
    - |
      location ^~ /api/v1/location/weightage/ {
          proxy_pass http://127.0.0.1:8136;
      }
    - |
      location ^~ /api/v1/experience/weightage/ {
          proxy_pass http://127.0.0.1:8137;
      }
    - |
      location ^~ /api/v1/reveal/ {
          proxy_pass http://127.0.0.1:8138;
      }
    - |
      location ^~ /api/v1/company/legal_entity {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /api/v1/check/registered/company {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /api/v1/jobs/legalEntity {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /api/v1/price/ {
          proxy_pass http://127.0.0.1:8140;
      }
    - |
      location ^~ /api/v1/payment/ {
          proxy_pass http://127.0.0.1:8141;
      }
    - |
      location ^~ /api/v1/data/quality/ {
          proxy_pass http://127.0.0.1:8144;
      }
    - |
      location ^~ /api/v1/candidate/search {
          proxy_pass http://127.0.0.1:8146;
      }
    - |
      location ^~ /api/v1/users {
          proxy_pass http://127.0.0.1:8147;
      }
    - |
      location ^~ /api/v1/candidate/conversation {
          proxy_pass http://127.0.0.1:8151;
      }
    - |
      location ^~ /api/v1/exotel {
          proxy_pass http://127.0.0.1:8152;
      }
    - |
      location ^~ /api/v2/candidate/search {
          proxy_pass http://127.0.0.1:8146;
      }
    - |
      location ^~ /api/v3/candidate/search {
          proxy_pass http://127.0.0.1:8146;
      }
    - |
      location ^~ /api/v1/jobs/search {
          proxy_pass http://127.0.0.1:8149;
      }
    - |
      location ^~ /api/v1/role/  {
          proxy_pass http://127.0.0.1:8091;
      }
    - |
      location ^~ /api/v1/token/  {
          proxy_pass http://127.0.0.1:8090;
      }
    - |
      location ^~ /api/v1/feature {
          proxy_pass http://127.0.0.1:8154;
      }
    - |
      location ^~ /api/v1/referral/ {
          proxy_pass http://127.0.0.1:8159;
      }
    - |
      location ^~ /api/v1/vendor/ {
          proxy_pass http://127.0.0.1:8158;
      }
    - |
      location ^~ /api/v1/resumeViewer/ {
          proxy_pass http://127.0.0.1:8163;
      }
    - |
      location ^~ /api/v1/signature/ {
          proxy_pass http://127.0.0.1:8160;
      }
    - |
      location ^~ /api/v1/parse {
          proxy_pass http://127.0.0.1:8161;
      }
    - |
      location ^~ /api/v1/watermark {
          proxy_pass http://127.0.0.1:8162;
      }
    - |
      location ^~ /api/v1/client {
          proxy_pass http://127.0.0.1:8164;
      }
    - |
      location ^~ /api/v1/entity {
          proxy_pass http://127.0.0.1:8166;
      }
    - |
      location ^~ /socket.io/ {
          proxy_pass http://127.0.0.1:8107;
          proxy_http_version 1.1;
          proxy_set_header Upgrade $http_upgrade;
          proxy_set_header Connection "Upgrade";
          proxy_set_header Host $host;
      }
    - |
      location ^~ /static/html {
          alias /opt/futurx/services/Steerhigh-HTML;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires 7d;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location ^~ /steerhigh/html/login/ {
          return 301 https://$host/login;
      }
    - |
      location ^~ /steerhigh/html/index/ {
          return 301 https://$host/login;
      }
    - |
      location ^~ /steerhigh/html/register/ {
          return 301 https://$host/public/signUp;
      }
    - |
      location ^~ /contributor {
          return 301 https://$host/seller/login;
      }
    - |
      location ^~ /hirer {
          rewrite '^/hirer/(.*)$' '/$1' break;
          root /opt/futurx/services/Scikey-Hirer-Webapp;
          try_files $uri$args $uri$args/ /hirer/index.html;
      }
    - |
      location ^~ /candidate {
          rewrite '^/candidate/(.*)$' '/$1' break;
          if ($client != staging-srkconsulting) {
              root /opt/futurx/services/Scikey-Candidate-Webapp;
          }
          if ($client = staging-srkconsulting) {
              root /opt/futurx/services/Scikey-Consulting-Candidate-Webapp;
          }
          try_files $uri$args $uri$args/ /candidate/index.html;
      }
    - |
      location ^~ /admin {
          rewrite '^/admin/(.*)$' '/$1' break;
          root /opt/futurx/services/Scikey-Admin-Webapp;
          try_files $uri$args $uri$args/ /admin/index.html;
      }
    - |
      location ^~ /seller {
          rewrite '^/seller/(.*)$' '/$1' break;
          root /opt/futurx/services/Scikey-Contributor-Webapp;
          try_files $uri$args $uri$args/ /seller/index.html;
      }
    - |
      location ^~ /manager {
          rewrite '^/manager/(.*)$' '/$1' break;
          root /opt/futurx/services/Scikey-Manager-Webapp;
          try_files $uri$args $uri$args/ /manager/index.html;
      }
    - |
      location ^~ /mtbase/dashboards/ {
          proxy_pass http://127.0.0.1:8157;
          rewrite ^/mtbase/dashboards/(.*) /$1 break;
      }
    - |
      location ^~ /employee {
          rewrite '^/employee/(.*)$' '/$1' break;
          root /opt/futurx/services/Scikey-Employee-Webapp;
          try_files $uri$args $uri$args/ /employee/index.html;
      }
    - |
      location ^~ /talentcommerce {
          rewrite '^/talentcommerce/(.*)$' '/$1' break;
          root /opt/futurx/services/Scikey-TalentCommerce-Webapp;
          try_files $uri$args $uri$args/ /talentcommerce/index.html;
      }
    - |
      location ^~ /api/v1/mail {
          proxy_pass http://127.0.0.1:8114;
      }
    - |
      location / {
          index index.html index.htm;
          try_files $uri $uri/ /index.html;
      }
    - |
      location ^~ /fresumes {
          alias /opt/futurx/services/fresumes-webapp;
      }
  scikey-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^staging-(.*)\.scikey\.ai$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  scikey-admin-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^staging-(.*)\.scikey\.io$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  scikey-admin-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^staging-(.*)\.scikey\.io$
    - ssl_certificate /etc/letsencrypt/live/staging-futurxlabs.scikey.io/fullchain.pem
    - ssl_certificate_key /etc/letsencrypt/live/staging-futurxlabs.scikey.io/privkey.pem
    - root /opt/futurx/services/Scikey-Webapp
    - |
      location ^~ /auth/v1/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /s/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /auth/v2/ {
          proxy_pass http://127.0.0.1:8081;
      }
    - |
      location ^~ /steerhigh/v1/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /steerhigh/v2/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /steerhigh/v3/ {
          proxy_pass http://127.0.0.1:8082;
      }
    - |
      location ^~ /assessment/score/v1/ {
          proxy_pass http://127.0.0.1:8087;
      }
    - |
      location ^~ /sthi/v2/report/ {
          proxy_pass http://127.0.0.1:8088;
      }
    - |
      location ^~ /sthi/v3/report/ {
          proxy_pass http://127.0.0.1:8088;
      }
    - |
      location ^~ /sthi/v5/report/ {
          proxy_pass http://127.0.0.1:8088;
      }
    - |
      location = /configms/v1/saveConfig {
        #   allow 13.71.31.57;
        #   deny all;
          proxy_pass http://127.0.0.1:8092;
      }
    - |
      location ^~ /configms/v1/ {
          proxy_pass http://127.0.0.1:8092;
      }
    - |
      location ^~ /configms/v2/ {
          proxy_pass http://127.0.0.1:8092;
      }
    - |
      location ^~ /analytics/v1/assessments/ {
          proxy_pass http://127.0.0.1:8095;
      }
    - |
      location ^~ /profile/v1/ {
          proxy_pass http://127.0.0.1:8096;
      }
    - |
      location ^~ /user/v1/ {
          proxy_pass http://127.0.0.1:8096;
      }
    - |
      location ^~ /scikey/v1/dictionaries {
          proxy_pass http://127.0.0.1:8097;
      }
    - |
      location ^~ /scikey/v1/jobfitment {
          proxy_pass http://127.0.0.1:8097;
      }
    - |
      location ^~ /scikey/v1/assessments {
          proxy_pass http://127.0.0.1:8098;
      }
    - |
      location ^~ /serenaway-dashboard/v1/ {
          proxy_pass http://127.0.0.1:8084;
      }
    - |
      location ^~ /featureMgmtConfigService/v1/ {
          proxy_pass http://127.0.0.1:8099;
      }
    - |
      location ^~ /pii/mgmt/v1/ {
          proxy_pass http://127.0.0.1:8104;
      }
    - |
      location ^~ /api/v1/location {
          proxy_pass http://127.0.0.1:8115;
      }
    - |
      location ^~ /api/v1/scikey/score {
          proxy_pass http://127.0.0.1:8116;
      }
    - |
      location ^~ /v1/lookup {
          proxy_pass http://127.0.0.1:8106;
      }
    - |
      location ^~ /api/v1/hire/admin {
          proxy_pass http://127.0.0.1:8124;
      }
    - |
      location ^~ /api/v1/candidates/ {
          proxy_pass http://127.0.0.1:8113;
      }
    - |
      location ^~ /api/v1/dashboard/candidate  {
          proxy_pass http://127.0.0.1:8125;
      }
    - |
      location ~* .(woff|woff2|eot|ttf|svg|mp4|webm|jpg|jpeg|png|gif|ico|css|js)$ {
          expires 7d;
          access_log off;
          add_header Pragma public;
          add_header Cache-Control "public, must-revalidate, proxy-revalidate";
      }
    - |
      location / {
          index index.html index.htm;
          try_files $uri $uri/ /index.html;
      }
  futurxlabs-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name ~^(?!.*(staging-portal)).*\.futurxlabs\.com$
    - ssl_certificate /etc/letsencrypt/live/dev-portal.futurxlabs.com/fullchain.pem
    - ssl_certificate_key /etc/letsencrypt/live/dev-portal.futurxlabs.com/privkey.pem
    - root /opt/futurx/services/futurx-web
    - return 301 $scheme://dev-public.scikey.ai$request_uri
  futurxlabs-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name ~^(?!.*(staging-portal)).*\.futurxlabs\.com$
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://dev-public.scikey.ai$request_uri;
      }
  futurxlabs-portal:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name staging-portal.futurxlabs.com
    - ssl_certificate /etc/letsencrypt/live/dev-portal.futurxlabs.com/fullchain.pem
    - ssl_certificate_key /etc/letsencrypt/live/dev-portal.futurxlabs.com/privkey.pem
    - |
      location /phpmyadmin/ {
          proxy_pass http://127.0.0.1:8881/;
      }
    - |
      location / {
          proxy_pass http://127.0.0.1:9090/;
      }
  futurxlabs-portal-http:
    - listen 80
    - listen [::]:80
    - server_name staging-portal.futurxlabs.com
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
  scikey-public-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name staging-public.scikey.ai
    - ssl_certificate /etc/nginx/ssl/scikey.ai.chained.crt
    - ssl_certificate_key /etc/nginx/ssl/scikey.ai.key
    - root /opt/futurx/services/scikey-public
    - return 301 $scheme://dev-hire.scikey.ai$request_uri
  scikey-public-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name staging-public.scikey.ai
    - root /usr/share/nginx/html
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://dev-hire.scikey.ai$request_uri;
      }
  scikey-redash-webapp:
    - listen 443 ssl http2
    - listen [::]:443 ssl http2
    - server_name staging-rdsh.scikey.ai
    - add_header Content-Security-Policy "frame-ancestors 'self' https://staging-hire.scikey.ai"
    - ssl_certificate /etc/nginx/ssl/scikey.ai.chained.crt
    - ssl_certificate_key /etc/nginx/ssl/scikey.ai.key
    - |
      location / {
          proxy_pass http://127.0.0.1:5000;
      }
  scikey-redash-webapp-http:
    - listen 80
    - listen [::]:80
    - server_name staging-rdsh.scikey.ai
    - |
      location ~ /.well-known {
          allow all;
      }
    - |
      location / {
          return 301 https://$host$request_uri;
      }
nginx_remove_sites:          []

nginx_daemon_mode:           "on"
